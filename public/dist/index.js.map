{"version":3,"file":"index.js","mappings":"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","sources":["webpack://alex-winter-game-maker/./src/Client/Component/Canvas/CanvasLayer.ts","webpack://alex-winter-game-maker/./src/Client/Component/File/FileUploader/FileUploader.ts","webpack://alex-winter-game-maker/./src/Client/Component/Generic/Modal/BasicModal.ts","webpack://alex-winter-game-maker/./src/Client/Component/Generic/handleDragAndDrop.ts","webpack://alex-winter-game-maker/./src/Client/Component/LayerListing/LayerItem.ts","webpack://alex-winter-game-maker/./src/Client/Component/LayerListing/LayerListing.ts","webpack://alex-winter-game-maker/./src/Client/Component/NewLayerForm/NewLayerForm.ts","webpack://alex-winter-game-maker/./src/Client/Component/SheetListing/SheetListing.ts","webpack://alex-winter-game-maker/./src/Client/Component/SideMenu/SideMenu.ts","webpack://alex-winter-game-maker/./src/Client/Component/SpriteSheets/SheetImporter/SheetImporter.ts","webpack://alex-winter-game-maker/./src/Client/Component/SpriteSheets/SheetMaker/SheetMaker.ts","webpack://alex-winter-game-maker/./src/Client/Component/WindowBox/WindowBox.ts","webpack://alex-winter-game-maker/./src/Client/Constants/components.ts","webpack://alex-winter-game-maker/./src/Client/Constants/events.ts","webpack://alex-winter-game-maker/./src/Client/Constants/mouse-events.ts","webpack://alex-winter-game-maker/./src/Client/Service/Component.ts","webpack://alex-winter-game-maker/./src/Client/Service/Dom.ts","webpack://alex-winter-game-maker/./src/Client/Service/Events.ts","webpack://alex-winter-game-maker/./src/Client/Service/FileUpload.ts","webpack://alex-winter-game-maker/./src/Client/Service/Repository/LayerRepository.ts","webpack://alex-winter-game-maker/./src/Client/Service/Repository/Repository.ts","webpack://alex-winter-game-maker/./src/Client/Service/Repository/SheetRepository.ts","webpack://alex-winter-game-maker/./src/Client/Service/WindowBoxFactory.ts","webpack://alex-winter-game-maker/./src/Client/Service/extract-image-from-canvas-area.ts","webpack://alex-winter-game-maker/./src/Client/Service/is-json.ts","webpack://alex-winter-game-maker/./src/Client/Service/patch-dom.ts","webpack://alex-winter-game-maker/./src/Client/styles.css","webpack://alex-winter-game-maker/./src/Model/Factory/LayerFactory.ts","webpack://alex-winter-game-maker/webpack/bootstrap","webpack://alex-winter-game-maker/webpack/runtime/make namespace object","webpack://alex-winter-game-maker/./src/Client/index.ts"],"sourcesContent":["import { EVENTS } from 'Client/Constants/events'\nimport { LEFT_BUTTON } from 'Client/Constants/mouse-events'\nimport { Coordinate } from 'Client/Model/Coordinate'\nimport { Placement } from 'Client/Model/Placement'\nimport { Component } from 'Client/Service/Component'\nimport { Dom } from 'Client/Service/Dom'\nimport { Events } from 'Client/Service/Events'\nimport { Layer } from 'Model/Layer'\n\nexport class CanvasLayer extends Component {\n    private ctx!: CanvasRenderingContext2D\n    private currentImage!: HTMLImageElement\n    private layer!: Layer\n    private isLeftMouseDown: boolean = false\n    private readonly mouseCoordinates: Coordinate = { x: 0, y: 0 }\n\n    protected css(): string {\n        return /*css*/`\n            :host {\n                z-index: 500;\n                display: block;\n                position: absolute;\n                top: 0;\n                left: 0;\n            }\n            \n            :host(.active) {\n                z-index: 501;\n            }\n\n            .current-image {\n                position: fixed;\n                pointer-events: none;\n            }\n\n            .hide {\n                display: none;\n            }\n        `\n    }\n\n    protected async setup(): Promise<void> {\n        this.layer = this.parameters.layer\n    }\n\n    protected build(): HTMLElement {\n        const canvas = Dom.canvas()\n\n        canvas.addEventListener('mousedown', this.handleMouseDown.bind(this))\n        canvas.addEventListener('mousemove', this.handleMouseMove.bind(this))\n\n        canvas.classList.toggle('hide', !this.layer.is_visible)\n        this.classList.toggle('active', this.layer.is_active)\n\n        this.handleWindowResize(canvas)\n\n        return canvas\n    }\n\n    protected afterBuild(): void {\n        Events.listen(this.handleWindowResize.bind(this), EVENTS.windowResize)\n        Events.listen(this.handleCurrentImageChange.bind(this), EVENTS.sheetSelectionMade)\n        Events.listen(this.handleLayerUpdate.bind(this), 'layer-update')\n\n        this.frame()\n    }\n\n    private handleLayerUpdate(event: CustomEvent): void {\n        const layer = event.detail as Layer\n\n        if (this.layer.uuid === layer.uuid) {\n            Object.assign(\n                this.layer,\n                layer,\n            )\n\n            this.patch()\n        }\n    }\n\n    private drawPlacement(placement: Placement): void {\n        Dom.image(placement.imageSrc).then(image => {\n            this.getCtx().drawImage(\n                image,\n                placement.coordinate.x,\n                placement.coordinate.y,\n            )\n        })\n    }\n\n    private frame(): void {\n        setTimeout(() => {\n            this.layer.placements.forEach(this.drawPlacement.bind(this))\n\n            window.requestAnimationFrame(this.frame.bind(this))\n        }, 200)\n    }\n\n    private handleMouseMove(event: MouseEvent): void {\n        const x = event.clientX\n        const y = event.clientY\n\n        this.mouseCoordinates.x = x\n        this.mouseCoordinates.y = y\n\n        if (this.currentImage) {\n            this.currentImage.style.left = x + 'px'\n            this.currentImage.style.top = y + 'px'\n        }\n    }\n\n    private handleMouseDown(event: MouseEvent): void {\n        if (event.button === LEFT_BUTTON && this.currentImage) {\n            this.isLeftMouseDown = true\n\n            const placement = {\n                coordinate: {\n                    x: this.mouseCoordinates.x,\n                    y: this.mouseCoordinates.y,\n                },\n                imageSrc: this.currentImage.src,\n            }\n\n            this.layer.placements.push(placement)\n\n            const mouseUp = (event: MouseEvent) => {\n                Events.emit(EVENTS.layerPlacementMade, this.layer)\n                document.removeEventListener('mouseup', mouseUp)\n            }\n\n            document.addEventListener('mouseup', mouseUp)\n        }\n    }\n\n    private handleCurrentImageChange(event: CustomEvent): void {\n        const newImage = event.detail as HTMLImageElement\n\n        if (this.currentImage) {\n            this.currentImage.src = newImage.src\n        } else {\n            this.currentImage = newImage.cloneNode() as HTMLImageElement\n            this.shadowRoot!.append(this.currentImage)\n            this.currentImage.classList.add('current-image')\n        }\n    }\n\n    private getCanvas(): HTMLCanvasElement {\n        return this.shadowRoot!.querySelector('canvas')!\n    }\n\n    private getCtx(): CanvasRenderingContext2D {\n        return this.getCanvas().getContext('2d')!\n    }\n\n    private handleWindowResize(canvas: HTMLCanvasElement | undefined = undefined): void {\n        const currentCanvas = canvas || this.getCanvas()\n        currentCanvas.width = window.outerWidth\n        currentCanvas.height = window.outerHeight\n    }\n}","import { Component } from 'Client/Service/Component'\nimport { Dom } from 'Client/Service/Dom'\nimport { Events } from 'Client/Service/Events'\n\nexport class FileUploader extends Component {\n    private readonly container: HTMLDivElement = Dom.div('uploader')\n\n    public isSingleton: boolean = true\n\n    protected css(): string {\n        return /*css*/`\n            :host {\n                display: block;\n                font-family: sans-serif;\n            }\n\n            .uploader {\n                border: 2px dashed #ccc;\n                border-radius: 8px;\n                padding: 20px;\n                text-align: center;\n                transition: background-color 0.2s;\n            }\n\n            .uploader.dragover {\n                background-color: #f0f0f0;\n            }\n\n            .upload-button {\n                margin-top: 10px;\n                display: inline-block;\n                padding: 8px 16px;\n                background-color: #007bff;\n                color: white;\n                border: none;\n                border-radius: 4px;\n                cursor: pointer;\n            }\n\n            input[type=\"file\"] {\n                display: none;\n            }\n        `\n    }\n\n    protected build(): HTMLElement {\n        this.container.textContent = 'Drag & drop files here'\n\n        this.container.addEventListener('dragover', this.handleDragOver.bind(this))\n        this.container.addEventListener('dragleave', this.handleDragLeave.bind(this))\n        this.container.addEventListener('drop', this.handleDragDrop.bind(this))\n\n        const input = Dom.multiFileInputWithDir()\n\n        input.addEventListener('change', () => {\n            if (input.files) {\n                this.handleFiles(input.files)\n            }\n        })\n\n        const button = Dom.button('Select Files', 'upload-button')\n        button.addEventListener('click', () => input.click())\n\n        const wrapper = Dom.div()\n\n        wrapper.append(\n            this.container,\n            button,\n            input,\n        )\n\n        return wrapper\n    }\n\n    private handleDragOver(event: DragEvent): void {\n        event.preventDefault()\n\n        this.container.classList.add('dragover')\n    }\n\n    private handleDragLeave(event: DragEvent): void {\n        this.container.classList.remove('dragover')\n    }\n\n    private handleDragDrop(event: DragEvent): void {\n        event.preventDefault()\n\n        this.container.classList.remove('dragover')\n\n        if (event.dataTransfer?.files) {\n            this.handleFiles(event.dataTransfer.files)\n        }\n    }\n\n    private handleFiles(files: FileList): void {\n        Events.emitFilesUploadSubmitted(\n            Array.from(files)\n        )\n    }\n}\n","import { EVENTS } from 'Client/Constants/events'\nimport { Component } from 'Client/Service/Component'\nimport { Dom } from 'Client/Service/Dom'\nimport { Events } from 'Client/Service/Events'\n\nexport class BasicModal extends Component {\n\n    protected css(): string {\n        return /*css*/`\n            .backdrop {\n                position: fixed;\n                inset: 0;\n                background: rgba(0, 0, 0, 0.6);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                z-index: 2000;\n            }\n\n            .modal-content {\n                background: white;\n                border-radius: 12px;\n                padding: 2rem;\n                max-width: 500px;\n                width: 90%;\n                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.25);\n                font-family: sans-serif;\n            }\n        `\n    }\n\n    protected build(): HTMLElement {\n        const backdrop = Dom.div('backdrop')\n        const content = Dom.div('modal-content')\n        const slot = Dom.slot()\n\n        backdrop.addEventListener('click', (event: MouseEvent) => {\n            if (event.target === backdrop) {\n                this.destroy()\n            }\n        })\n\n        Events.listen((event) => {\n            if (this.contains(event.detail as Component)) {\n                this.destroy()\n            }\n        }, EVENTS.closeModal)\n\n        content.append(slot)\n\n        backdrop.appendChild(content)\n\n        return backdrop\n    }\n}\n","export interface DraggableHTMLElement extends HTMLElement {\n    isDragging: boolean\n    offsetX: number\n    offsetY: number\n}\n\nexport function handleDragAndDrop(element: DraggableHTMLElement, event: MouseEvent): void {\n    element.isDragging = true\n\n    const rect = element.getBoundingClientRect()\n\n    element.offsetX = event.clientX - rect.left\n    element.offsetY = event.clientY - rect.top\n\n    const onMouseMove = (e: MouseEvent) => {\n        if (element.isDragging) {\n            element.style.left = `${e.clientX - element.offsetX}px`\n            element.style.top = `${e.clientY - element.offsetY}px`\n            element.style.transform = 'none'\n        }\n    }\n\n    const onMouseUp = () => {\n        element.isDragging = false\n        document.removeEventListener('mousemove', onMouseMove)\n        document.removeEventListener('mouseup', onMouseUp)\n    }\n\n    document.addEventListener('mousemove', onMouseMove)\n    document.addEventListener('mouseup', onMouseUp)\n}","import { Component } from 'Client/Service/Component'\nimport { Dom } from 'Client/Service/Dom'\nimport { Events } from 'Client/Service/Events'\nimport { Layer } from 'Model/Layer'\n\nexport class LayerItem extends Component {\n    private layer!: Layer\n    private container!: HTMLDivElement\n    private visibleButton!: HTMLButtonElement\n\n    protected css(): string {\n        return /*css*/`\n            .container {\n                display: flex;\n            }\n\n            .container > div {\n                flex: 1;\n            }\n        `\n    }\n\n    protected async setup(): Promise<void> {\n        this.layer = this.parameters.layer\n    }\n\n    protected build(): HTMLElement {\n        this.container = Dom.div('container')\n        const name = Dom.div()\n        const options = Dom.div()\n        this.visibleButton = Dom.button()\n        const eyeIcon = document.createElement('i')\n\n        name.innerText = this.layer.name\n\n        eyeIcon.classList.add('fa-solid', this.layer.is_visible ? 'fa-eye' : 'fa-eye-slash')\n\n        this.visibleButton.append(eyeIcon)\n\n        options.append(\n            this.visibleButton,\n        )\n\n        this.container.append(\n            name,\n            options,\n        )\n\n        return this.container\n    }\n\n    protected afterBuild(): void {\n\n        this.container.addEventListener('click', () => {\n            Events.emit('layer-active', this.layer)\n        })\n\n        this.visibleButton.addEventListener('click', () => {\n            this.layer.is_visible = !this.layer.is_visible\n\n            Events.emit('layer-update', this.layer)\n\n            this.patch()\n        })\n    }\n}","import { LayerItem } from 'Client/Component/LayerListing/LayerItem'\nimport { EVENTS } from 'Client/Constants/events'\nimport { Component } from 'Client/Service/Component'\nimport { Dom } from 'Client/Service/Dom'\nimport { Events } from 'Client/Service/Events'\nimport { Layer } from 'Model/Layer'\n\nexport class LayerListing extends Component {\n    private listing!: HTMLDivElement\n    private addNewLayerButton!: HTMLButtonElement\n\n    protected build(): HTMLElement {\n        const container = Dom.div()\n        this.listing = Dom.div()\n        this.addNewLayerButton = Dom.button('Add New Layer')\n\n        container.append(this.listing, this.addNewLayerButton)\n\n        return container\n    }\n\n    protected afterBuild(): void {\n        this.addNewLayerButton.addEventListener('click', () => Events.emit(EVENTS.openAddNewLayer))\n\n        Events.listen(\n            event => {\n                this.listing.append(\n                    ...(event.detail as Layer[]).map(this.buildLayer.bind(this))\n                )\n            },\n            EVENTS.newLayerMapped,\n            EVENTS.gotLayer,\n        )\n    }\n\n    private buildLayer(layer: Layer): HTMLElement {\n        return Dom.makeComponent(LayerItem, { layer })\n    }\n}","import { EVENTS } from 'Client/Constants/events'\nimport { Component } from 'Client/Service/Component'\nimport { Dom } from 'Client/Service/Dom'\nimport { Events } from 'Client/Service/Events'\n\nexport class NewLayerForm extends Component {\n\n    private name: string = ''\n\n    protected css(): string {\n        return /*css*/`\n            .form-container {\n                font-family: sans-serif;\n                width: 100%;\n            }\n\n            .form-group {\n                margin-bottom: 1rem;\n            }\n\n            .form-label {\n                display: block;\n                margin-bottom: 0.5rem;\n                font-weight: 600;\n                color: #333;\n            }\n\n            .text-input {\n                width: 100%;\n                padding: 0.5rem;\n                font-size: 1rem;\n                border: 1px solid #ccc;\n                border-radius: 4px;\n                outline: none;\n            }\n\n            .text-input:focus {\n                border-color: #007bff;\n                box-shadow: 0 0 0 2px rgba(0,123,255,0.2);\n            }\n        `\n    }\n\n    protected build(): HTMLElement {\n        const container = Dom.div('form-container')\n        const formGroup = Dom.div('form-group')\n\n        const label = Dom.label('Layer Name', 'form-label')\n        const input = Dom.inputText('text-input')\n        input.placeholder = 'Enter layer name'\n        input.addEventListener('keyup', () => this.name = input.value)\n\n        const submitButton = Dom.button('Save')\n        submitButton.addEventListener('click', this.handleSubmit.bind(this))\n\n        formGroup.appendChild(label)\n        formGroup.appendChild(input)\n\n        container.append(\n            formGroup,\n            submitButton,\n        )\n\n        return container\n    }\n\n    private handleSubmit(): void {\n        Events.emit(\n            EVENTS.closeModal,\n            this\n        )\n        Events.emit(\n            EVENTS.newLayerSubmit,\n            {\n                name: this.name,\n            }\n        )\n    }\n}\n","import { EVENTS } from 'Client/Constants/events'\nimport { Sheet } from 'Client/Model/Sheet'\nimport { Component } from 'Client/Service/Component'\nimport { Dom } from 'Client/Service/Dom'\nimport { Events } from 'Client/Service/Events'\n\nexport class FileListing extends Component {\n    protected css(): string {\n        return /*css*/`\n            :host {\n                display: block;\n                max-height: 400px;\n                overflow-y: scroll;\n            }        \n\n            .file {\n                display: flex;\n                padding: 10px;\n            }\n            .file div {\n                flex: 1;\n            }\n        `\n    }\n\n    protected build(): HTMLElement {\n        const container = Dom.div()\n\n        Events.listenToFilesUploadSubmitted(async fileList => {\n            const sheets = await Promise.all(\n                fileList.map(this.mapToSheet.bind(this))\n            )\n            container.append(\n                ...sheets.map(this.buildSheet.bind(this))\n            )\n        })\n\n        Events.listen(\n            event => {\n                container.append(\n                    ...(event.detail as Sheet[])\n                        .map(this.buildSheet.bind(this))\n                )\n            },\n            EVENTS.gotSheets,\n        )\n\n        Events.emit(EVENTS.getSheets)\n\n        return container\n    }\n\n    private mapToSheet(file: File): Promise<Sheet> {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader()\n\n            reader.onload = () => {\n                const base64 = reader.result as string\n                resolve({\n                    name: file.name,\n                    imageSrc: base64,\n                })\n            }\n\n            reader.onerror = () => {\n                reject(new Error('Failed to read file'))\n            }\n\n            reader.readAsDataURL(file)\n        })\n    }\n\n    private buildSheet(sheet: Sheet): HTMLElement {\n        const container = Dom.div('file')\n        const name = Dom.div()\n        const options = Dom.div()\n        const openButton = Dom.button('Open')\n\n        name.innerText = sheet.name\n\n        openButton.addEventListener('click', (e) => Events.emitOpenSheet(sheet))\n\n        options.append(openButton)\n\n        container.append(name, options)\n\n        return container\n    }\n}","import { Component } from 'Client/Service/Component'\nimport { Dom } from 'Client/Service/Dom'\nimport { Events } from 'Client/Service/Events'\n\nexport class SideMenu extends Component {\n    public isSingleton: boolean = true\n\n    protected css(): string {\n        return /*css*/`\n            :host {\n                background-color: whitesmoke;\n                position: fixed;\n                left: 0;\n                right: 0;\n                height: 100vh;\n                width: 200px;\n                z-index: 800;\n            }\n        `\n    }\n\n    protected build(): HTMLElement {\n        const container = Dom.div()\n        const slot = Dom.slot()\n        const sheetImportOption = this.buildMiniOption()\n\n        container.append(\n            slot,\n            sheetImportOption,\n        )\n\n        return container\n    }\n\n    protected buildMiniOption(): HTMLElement {\n        const option = Dom.button('s', 'sheet-import')\n\n        option.addEventListener('click', () => Events.emitSheetImportOpen())\n\n        return option\n    }\n}","import { FileListing } from 'Client/Component/SheetListing/SheetListing'\nimport { FileUploader } from 'Client/Component/File/FileUploader/FileUploader'\nimport { Component } from 'Client/Service/Component'\nimport { Dom } from 'Client/Service/Dom'\n\nexport class SheetImporter extends Component {\n    public isSingleton: boolean = true\n\n    protected build(): HTMLElement {\n        const container = Dom.div()\n        const fileListing = Dom.makeComponent(FileListing)\n        const uploader = Dom.makeComponent(FileUploader)\n\n        container.append(\n            fileListing,\n            uploader,\n        )\n\n        return container\n    }\n}","import { EVENTS } from 'Client/Constants/events'\nimport { Component } from 'Client/Service/Component'\nimport { Dom } from 'Client/Service/Dom'\nimport { Events } from 'Client/Service/Events'\nimport { extractImageFromCanvasArea } from 'Client/Service/extract-image-from-canvas-area'\n\nexport class SheetMaker extends Component {\n    private image: HTMLImageElement | null = null\n    private canvas!: HTMLCanvasElement\n\n    protected css(): string {\n        return /*css*/`\n            :host {\n                position: relative;\n                max-width: 400px;\n                max-height: 400px;\n                overflow: scroll;\n                display: block;\n            }\n\n            .selector-box {\n                position: absolute;\n                border: 1px solid #0078D7;\n                background-color: rgba(0, 120, 215, 0.2);\n                pointer-events: none;\n                display: none;\n                z-index: 10;\n            }\n        `\n    }\n\n    protected async setup(): Promise<void> {\n        if (this.dataset.imageSrc) {\n            this.image = await Dom.image(this.dataset.imageSrc as string)\n        }\n    }\n\n    protected build(): HTMLElement {\n        const element = Dom.div()\n        this.canvas = Dom.canvas(\n            element.offsetHeight,\n            element.offsetWidth,\n        )\n        const context = this.canvas.getContext('2d')!\n        const selectorBox = this.buildSelectorBox()\n\n        if (this.image) {\n            this.canvas.width = this.image.width\n            this.canvas.height = this.image.height\n\n            context.drawImage(this.image, 0, 0)\n        }\n\n        element.append(this.canvas, selectorBox)\n\n        return element\n    }\n\n    protected buildSelectorBox(): HTMLDivElement {\n        const box = Dom.div('selector-box')\n\n        let startX = 0\n        let startY = 0\n        let isDragging = false\n\n        const snap = (value: number) => Math.round(value / 5) * 5\n\n        const onMouseMove = (event: MouseEvent) => {\n            if (!isDragging) return\n\n            const rect = this.getBoundingClientRect()\n            const currentX = event.clientX - rect.left\n            const currentY = event.clientY - rect.top\n\n            const width = snap(Math.abs(currentX - startX))\n            const height = snap(Math.abs(currentY - startY))\n\n            box.style.display = 'block'\n            box.style.left = snap(Math.min(currentX, startX)) + 'px'\n            box.style.top = snap(Math.min(currentY, startY)) + 'px'\n            box.style.width = width + 'px'\n            box.style.height = height + 'px'\n        }\n\n        const onMouseUp = async () => {\n            isDragging = false\n            document.removeEventListener('mousemove', onMouseMove)\n            document.removeEventListener('mouseup', onMouseUp)\n\n            const boxX = parseInt(box.style.left || '0', 10)\n            const boxY = parseInt(box.style.top || '0', 10)\n            const boxWidth = parseInt(box.style.width || '0', 10)\n            const boxHeight = parseInt(box.style.height || '0', 10)\n\n            Events.emit(\n                EVENTS.sheetSelectionMade,\n                await extractImageFromCanvasArea(\n                    this.canvas,\n                    boxX,\n                    boxY,\n                    boxWidth,\n                    boxHeight\n                )\n            )\n        }\n\n        this.addEventListener('mousedown', (event: MouseEvent) => {\n            const rect = this.getBoundingClientRect()\n            isDragging = true\n            startX = event.clientX - rect.left\n            startY = event.clientY - rect.top\n\n            box.style.display = 'none'\n\n            document.addEventListener('mousemove', onMouseMove)\n            document.addEventListener('mouseup', onMouseUp)\n        })\n\n        return box\n    }\n\n}","import { DraggableHTMLElement, handleDragAndDrop } from 'Client/Component/Generic/handleDragAndDrop'\nimport { Component } from 'Client/Service/Component'\nimport { Dom } from 'Client/Service/Dom'\nimport { Events } from 'Client/Service/Events'\n\nexport class WindowBox extends Component implements DraggableHTMLElement {\n    isDragging = false\n    offsetX = 0\n    offsetY = 0\n\n    public zIndexMoveDown(): void {\n        this.style.zIndex = '1000'\n    }\n\n    public zIndexMoveUp(): void {\n        this.style.zIndex = '1001'\n    }\n\n    public flash(): void {\n        this.classList.add('flash')\n        setTimeout(() => {\n            this.classList.remove('flash')\n        }, 500)\n    }\n\n    protected css(): string {\n        return /*css*/`\n            :host {\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translateX(-50%) translateY(-50%);\n                cursor: default;\n                z-index: 1001;\n            }\n\n            .header {\n                background: #ccc;\n                padding: 10px;\n                cursor: move;\n                user-select: none;\n                display: flex;\n            }\n\n            .header > div {\n                flex: 1;\n            }\n\n            .options {\n                display:flex;\n                justify-content: flex-end;\n            }\n\n            .close:hover {\n                color: red;\n                cursor: pointer;\n            }\n\n            .content {\n                padding: 10px;\n                background: white;\n                border: 1px solid #ccc;\n            }\n\n            @keyframes flash {\n                0% {\n                  box-shadow: 0 0 0px rgba(255, 200, 0, 0.8);\n                  transform: scale(1);\n                }\n                50% {\n                  box-shadow: 0 0 12px rgba(255, 200, 0, 0.9);\n                  transform: scale(1.02);\n                }\n                100% {\n                  box-shadow: 0 0 0px rgba(255, 200, 0, 0);\n                  transform: scale(1);\n                }\n              }\n              \n              :host(.flash) {\n                animation: flash 0.5s ease-in-out;\n              }\n        `\n    }\n\n    protected build(): HTMLElement {\n        const container = Dom.div('window-box')\n        const content = Dom.div('content')\n        const slot = Dom.slot()\n\n        container.addEventListener('mousedown', (e) => Events.emitMouseDownOnWindowBox(this))\n\n        content.append(slot)\n\n        container.append(\n            this.buildHeader(),\n            content,\n        )\n\n        return container\n    }\n\n    private buildHeader(): HTMLElement {\n        const element = Dom.div('header')\n        const title = Dom.div()\n        const options = Dom.div('options')\n        const close = Dom.div('close')\n\n        close.innerText = 'x'\n\n        title.innerText = this.dataset.title || ''\n\n        element.addEventListener('mousedown', (e) => handleDragAndDrop(this, e))\n        close.addEventListener('click', (event) => {\n            event.stopPropagation()\n            this.destroy()\n        }, true)\n\n        options.append(close)\n\n        element.append(\n            title,\n            options,\n        )\n\n        return element\n    }\n}\n","import { LayerListing } from 'Client/Component/LayerListing/LayerListing'\nimport { WindowBox } from 'Client/Component/WindowBox/WindowBox'\nimport { FileUploader } from 'Client/Component/File/FileUploader/FileUploader'\nimport { FileListing } from 'Client/Component/SheetListing/SheetListing'\nimport { SheetMaker } from 'Client/Component/SpriteSheets/SheetMaker/SheetMaker'\nimport { SideMenu } from 'Client/Component/SideMenu/SideMenu'\nimport { SheetImporter } from 'Client/Component/SpriteSheets/SheetImporter/SheetImporter'\nimport { BasicModal } from 'Client/Component/Generic/Modal/BasicModal'\nimport { NewLayerForm } from 'Client/Component/NewLayerForm/NewLayerForm'\nimport { CanvasLayer } from 'Client/Component/Canvas/CanvasLayer'\nimport { LayerItem } from 'Client/Component/LayerListing/LayerItem'\n\nexport const COMPONENTS = new Map<CustomElementConstructor, string>([\n\n  [SideMenu, 'side-menu'],\n\n  [LayerListing, 'layer-listing'],\n\n  [WindowBox, 'window-box'],\n\n  [FileUploader, 'file-uploader'],\n\n  [FileListing, 'file-listing'],\n\n  [SheetMaker, 'sheet-maker'],\n\n  [SheetImporter, 'sheet-importer'],\n\n  [BasicModal, 'modal-basic'],\n\n  [NewLayerForm, 'new-layer-form'],\n\n  [CanvasLayer, 'canvas-layer'],\n\n  [LayerItem, 'layer-item'],\n\n])\n","export const EVENTS = {\n\n    uploadFilesSubmission: 'upload-files-submission',\n\n    openSheet: 'open-sheet',\n\n    openSheetImporter: 'open-sheet-importer',\n\n    openAddNewLayer: 'open-add-new-layer',\n\n    mouseDownWindowBox: 'mouse-down-window-box',\n\n    newLayerSubmit: 'new-layer-submit',\n\n    newLayerMapped: 'new-layer-mapped',\n\n    gotLayer: 'got-layer',\n\n    getSheets: 'get-sheets',\n    gotSheets: 'got-sheets',\n\n    closeModal: 'close-modal',\n\n    sheetSelectionMade: 'sheet-selection-made',\n\n    windowResize: 'window-resize',\n\n    layerPlacementMade: 'layer-placement-made',\n}","export const LEFT_BUTTON = 0","import { isJSON } from 'Client/Service/is-json'\nimport { patchDOM } from 'Client/Service/patch-dom'\n\nexport abstract class Component extends HTMLElement {\n    private readonly shadow: ShadowRoot\n    public isSingleton: boolean = false\n    private content!: HTMLElement\n    protected readonly parameters: { [key: string]: any } = {}\n\n    constructor() {\n        super()\n\n        this.shadow = this.attachShadow({ mode: 'open' })\n    }\n\n    protected abstract build(): HTMLElement\n    protected async setup(): Promise<void> { }\n    protected afterBuild(): void { }\n    protected css(): string {\n        return ''\n    }\n\n    public destroy() {\n        this.shadow.host.remove()\n    }\n\n    public reload() {\n        this.render(true)\n    }\n\n    protected connectedCallback(): void {\n        this.render()\n    }\n\n    protected patch(): void {\n        const firstChild = Array.from(this.shadow.children)\n            .filter(child => child.tagName !== 'LINK')[0]\n\n        if (firstChild) {\n            patchDOM(firstChild, this.build())\n        }\n    }\n\n    private render(isReload: boolean = false) {\n        Object.entries(this.dataset).forEach(([key, value]) => {\n            this.parameters[key] = isJSON(value)\n                ? JSON.parse(value)\n                : value\n        })\n\n        this.setup()\n            .then(() => {\n                const css = this.css().trim()\n\n                const link = document.createElement('link')\n\n                link.rel = 'stylesheet'\n                link.href = '/dist/styles.css'\n\n                this.shadow.append(link)\n\n                if (css.length) {\n                    const sheet = new CSSStyleSheet()\n                    sheet.replaceSync(css)\n                    this.shadow.adoptedStyleSheets = [sheet]\n                }\n\n                this.content = this.build()\n\n                if (isReload) {\n                    this.shadow.replaceChild(\n                        this.build(),\n                        this.content,\n                    )\n                } else {\n                    this.shadow.appendChild(\n                        this.content\n                    )\n                }\n            })\n            .then(() => {\n                this.afterBuild()\n            })\n    }\n}","import { COMPONENTS } from 'Client/Constants/components'\nimport { Component } from 'Client/Service/Component'\n\nexport class Dom {\n    constructor() {\n        throw new Error('Can not construct')\n    }\n\n    public static div(...classList: string[]): HTMLDivElement {\n        const element = document.createElement('div')\n\n        if (classList.length) {\n            element.classList.add(...classList)\n        }\n\n        return element\n    }\n\n    public static label(text: string, ...classList: string[]): HTMLLabelElement {\n        const element = document.createElement('label')\n\n        element.innerText = text\n\n        if (classList.length) {\n            element.classList.add(...classList)\n        }\n\n        return element\n    }\n\n    public static inputText(...classList: string[]): HTMLInputElement {\n        const element = document.createElement('input')\n\n        element.type = 'text'\n\n        return element\n    }\n\n    public static canvas(width: number = 0, height: number = 0): HTMLCanvasElement {\n        const element = document.createElement('canvas')\n\n        element.width = width\n        element.height = height\n\n        return element\n    }\n\n    public static button(text: string = '', ...classList: string[]): HTMLButtonElement {\n        const element = document.createElement('button')\n\n        element.innerText = text\n\n        if (classList.length) {\n            element.classList.add(...classList)\n        }\n\n        return element\n    }\n\n    public static slot(): HTMLSlotElement {\n        return document.createElement('slot')\n    }\n\n    public static multiFileInputWithDir(): HTMLInputElement {\n        const element = document.createElement('input')\n\n        element.type = 'file'\n        element.webkitdirectory = true\n        element.multiple = true\n\n        return element\n    }\n\n    public static async image(src: string): Promise<HTMLImageElement> {\n        return new Promise((resolve, reject) => {\n            const image: HTMLImageElement = document.createElement('img')\n            image.src = src\n            image.addEventListener('load', () => resolve(image))\n            image.addEventListener('abort', () => reject())\n        })\n    }\n\n    public static makeComponent(\n        component: CustomElementConstructor,\n        dataset: { [key: string]: string | any[] | Object } = {},\n    ): Component {\n        const tag = this.findComponentTag(component)\n        const existing = Dom.queryAllDeep(tag)\n\n        if (existing.length) {\n            const found = existing[0] as Component\n            if (found.isSingleton) {\n                return found\n            }\n        }\n\n        const element = document.createElement(tag)\n\n        Object.entries(dataset).forEach(([key, value]) => {\n            if (value instanceof Object || Array.isArray(value)) {\n                dataset[key] = JSON.stringify(value)\n            }\n        })\n\n        Object.assign(\n            element.dataset,\n            dataset\n        )\n\n        return element as Component\n    }\n\n    public static getAllOfComponent<T = CustomElementConstructor>(component: CustomElementConstructor): T[] {\n        const tag = this.findComponentTag(component)\n\n        return Array.from(\n            Dom.queryAllDeep(tag)\n        ) as T[]\n    }\n\n    private static queryAllDeep(selector: string, root: ParentNode = document): Element[] {\n        const result: Element[] = []\n\n        const traverse = (node: Element): void => {\n            if (node.matches(selector)) {\n                result.push(node)\n            }\n\n            const shadow = (node as HTMLElement).shadowRoot\n            if (shadow) {\n                traverseAll(shadow)\n            }\n\n            Array.from(node.children).forEach(child => traverse(child as Element))\n        }\n\n        const traverseAll = (container: ParentNode): void => {\n            Array.from(container.children).forEach(child => traverse(child as Element))\n        }\n\n        traverseAll(root)\n\n        return result\n    }\n\n    private static findComponentTag(component: CustomElementConstructor): string {\n        const tag = COMPONENTS.get(component)\n\n        if (!tag) {\n            throw new Error(`Component not found in COMPONENTS map: ${component.name}`)\n        }\n\n        return tag\n    }\n}","import { WindowBox } from 'Client/Component/WindowBox/WindowBox'\nimport { EVENTS } from 'Client/Constants/events'\nimport { Sheet } from 'Client/Model/Sheet'\n\ntype EventFn<T = any> = (event: CustomEvent<T>) => void\n\nexport class Events {\n    constructor() {\n        throw new Error('Can not construct')\n    }\n\n    public static emit<T>(key: string, detail: T | undefined = undefined): void {\n        document.dispatchEvent(\n            new CustomEvent<T>(\n                key,\n                {\n                    detail,\n                    bubbles: false,\n                    composed: true\n                }\n            )\n        )\n    }\n\n    private static addListener<T>(key: string, callback: EventFn<T>): void {\n        document.addEventListener(\n            key,\n            callback as EventListener,\n        )\n    }\n\n    public static listen<T>(\n        callback: EventFn<T>,\n        ...keys: string[]\n    ): void {\n        keys.forEach(key => {\n            this.addListener(key, callback)\n        })\n    }\n\n    public static emitFilesUploadSubmitted(files: File[]): void {\n        Events.emit<File[]>(\n            EVENTS.uploadFilesSubmission,\n            files\n        )\n    }\n\n    public static listenToFilesUploadSubmitted(callback: (files: File[]) => void): void {\n        Events.listen<File[]>(\n            event => {\n                callback(event.detail)\n            },\n            EVENTS.uploadFilesSubmission,\n        )\n    }\n\n    public static emitOpenSheet(sheet: Sheet): void {\n        this.emit(EVENTS.openSheet, sheet)\n    }\n\n    public static listenToOpenSheet(callback: (sheet: Sheet) => void): void {\n        Events.listen<Sheet>(\n            event => {\n                callback(event.detail)\n            },\n            EVENTS.openSheet,\n        )\n    }\n\n    public static emitMouseDownOnWindowBox(windowBox: WindowBox): void {\n        Events.emit(\n            EVENTS.mouseDownWindowBox,\n            windowBox,\n        )\n    }\n\n    public static listenMouseDownOnWindowBox(callback: (windowBox: WindowBox) => void): void {\n        Events.listen<HTMLElement>(\n            event => {\n                callback(event.detail as WindowBox)\n            },\n            EVENTS.mouseDownWindowBox,\n        )\n    }\n\n    public static emitSheetImportOpen(): void {\n        Events.emit(\n            EVENTS.openSheetImporter,\n        )\n    }\n\n    public static listenToSheetImportOpen(callback: () => void): void {\n        Events.listen(\n            (event) => {\n                callback()\n            },\n            EVENTS.openSheetImporter,\n        )\n    }\n}\n","export class FileUpload {\n    public static async uploadMultiple(files: File[]): Promise<void> {\n        const formData = new FormData()\n\n        files.forEach((file) => {\n            formData.append('files[]', file)\n        })\n\n        await fetch('/upload-files', {\n            method: 'POST',\n            body: formData,\n        })\n    }\n}","import { Events } from 'Client/Service/Events'\nimport { Repository } from 'Client/Service/Repository/Repository'\nimport { Layer } from 'Model/Layer'\n\nexport class LayerRepository extends Repository {\n    private readonly API_PATH = '/layers'\n\n    private layers!: Layer[]\n\n    public async persist(...layers: Layer[]): Promise<void> {\n        await this.post(\n            this.API_PATH,\n            layers,\n        )\n    }\n\n    public async update(layer: Layer): Promise<void> {\n        await this.patch(\n            this.API_PATH,\n            layer,\n        )\n    }\n\n    public async getAll(): Promise<Layer[]> {\n        if (this.layers) {\n            return this.layers\n        }\n\n        return this.layers = await this.get(this.API_PATH)\n    }\n\n    public setActive(uuid: string) {\n        for (const layer of this.layers) {\n            layer.is_active = layer.uuid === uuid\n            Events.emit('layer-update', layer)\n        }\n    }\n}","type Body = Array<Object> | Object\n\nexport abstract class Repository {\n    protected post(\n        path: string,\n        body: Body,\n    ): Promise<Response> {\n        return fetch(path, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(body),\n        })\n    }\n\n    protected patch(\n        path: string,\n        body: Body,\n    ): Promise<Response> {\n        return fetch(path, {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(body)\n        })\n    }\n\n    protected async get<T>(path: string): Promise<T> {\n        const response = await fetch(path)\n\n        return response.json()\n    }\n}","import { Sheet } from 'Client/Model/Sheet'\nimport { Repository } from 'Client/Service/Repository/Repository'\n\nexport class SheetRepository extends Repository {\n    private readonly API_PATH = '/sheets'\n\n    public async getAll(): Promise<Sheet[]> {\n        return await this.get(this.API_PATH)\n    }\n}","import { WindowBox } from 'Client/Component/WindowBox/WindowBox'\nimport { Component } from 'Client/Service/Component'\nimport { Dom } from 'Client/Service/Dom'\n\nconst singletonInstances: Component[] = []\n\nexport class WindowBoxFactory {\n    public static make(\n        component: Component,\n        title: string,\n    ): WindowBox {\n        const windowBox: WindowBox = Dom.makeComponent(WindowBox) as WindowBox\n\n        if (component.isSingleton && singletonInstances.includes(component)) {\n            return windowBox\n        }\n\n        if (!windowBox.isConnected) {\n            windowBox.dataset.title = title\n\n            windowBox.append(component)\n\n            if (component.isSingleton) {\n                singletonInstances.push(component)\n            }\n\n            document.body.append(\n                windowBox\n            )\n        }\n\n        return windowBox\n    }\n}","import { Dom } from 'Client/Service/Dom'\n\nexport async function extractImageFromCanvasArea(\n    sourceCanvas: HTMLCanvasElement,\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n): Promise<HTMLImageElement> {\n    const tempCanvas = Dom.canvas(width, height)\n    const ctx = tempCanvas.getContext('2d')!\n    const image = await Dom.image(sourceCanvas.toDataURL())\n\n    ctx.drawImage(image, x, y, width, height, 0, 0, width, height)\n\n    return await Dom.image(tempCanvas.toDataURL())\n}","export function isJSON(value: any): value is string {\n    if (typeof value !== 'string') {\n        return false\n    }\n\n    try {\n        const parsed = JSON.parse(value)\n\n        return typeof parsed === 'object' && parsed !== null\n    } catch {\n        return false\n    }\n}","export function patchDOM(oldNode: Node, newNode: Node): void {\n    if (!oldNode || !newNode) return\n\n    // Replace if node types or node names differ\n    if (oldNode.nodeType !== newNode.nodeType || oldNode.nodeName !== newNode.nodeName) {\n        if (oldNode.nodeType === Node.ELEMENT_NODE || oldNode.nodeType === Node.TEXT_NODE) {\n            (oldNode as Element | Text).replaceWith(newNode.cloneNode(true))\n        }\n        return\n    }\n\n    // Update text content for text nodes\n    if (oldNode.nodeType === Node.TEXT_NODE && newNode.nodeType === Node.TEXT_NODE) {\n        const oldText = oldNode as Text\n        const newText = newNode as Text\n\n        if (oldText.nodeValue !== newText.nodeValue) {\n            oldText.nodeValue = newText.nodeValue\n        }\n\n        return\n    }\n\n    // If we're here, assume ELEMENT_NODEs\n    if (oldNode.nodeType === Node.ELEMENT_NODE && newNode.nodeType === Node.ELEMENT_NODE) {\n        const oldEl = oldNode as HTMLElement\n        const newEl = newNode as HTMLElement\n\n        // Update attributes\n        const oldAttrs = oldEl.attributes\n        const newAttrs = newEl.attributes\n\n        // Add or update attributes\n        for (let i = 0; i < newAttrs.length; i++) {\n            const attr = newAttrs[i]\n            if (oldEl.getAttribute(attr.name) !== attr.value) {\n                oldEl.setAttribute(attr.name, attr.value)\n            }\n        }\n\n        // Remove old attributes not present in new\n        for (let i = 0; i < oldAttrs.length; i++) {\n            const attr = oldAttrs[i]\n            if (!newEl.hasAttribute(attr.name)) {\n                oldEl.removeAttribute(attr.name)\n            }\n        }\n\n        // Recursively patch children\n        const oldChildren = Array.from(oldEl.childNodes)\n        const newChildren = Array.from(newEl.childNodes)\n\n        const max = Math.max(oldChildren.length, newChildren.length)\n\n        for (let i = 0; i < max; i++) {\n            const oldChild = oldChildren[i]\n            const newChild = newChildren[i]\n\n            if (!oldChild && newChild) {\n                oldEl.appendChild(newChild.cloneNode(true))\n            } else if (oldChild && !newChild) {\n                oldEl.removeChild(oldChild)\n            } else if (oldChild && newChild) {\n                patchDOM(oldChild, newChild)\n            }\n        }\n    }\n}\n","// extracted by mini-css-extract-plugin\nexport {};","import { Layer } from 'Model/Layer'\n\nexport class LayerFactory {\n    public static make(): Layer {\n        return {\n            uuid: crypto.randomUUID(),\n\n            name: '',\n\n            created_at: new Date().toISOString(),\n\n            is_visible: true,\n\n            is_active: false,\n\n            placements: [],\n        }\n    }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import 'Client/styles.css'\nimport { COMPONENTS } from 'Client/Constants/components'\nimport { Events } from 'Client/Service/Events'\nimport { FileUpload } from 'Client/Service/FileUpload'\nimport { Dom } from 'Client/Service/Dom'\nimport { fileToBase64 } from 'Client/Service/fileToBase64'\nimport { WindowBox } from 'Client/Component/WindowBox/WindowBox'\nimport { WindowBoxFactory } from 'Client/Service/WindowBoxFactory'\nimport { SheetImporter } from 'Client/Component/SpriteSheets/SheetImporter/SheetImporter'\nimport { SheetMaker } from 'Client/Component/SpriteSheets/SheetMaker/SheetMaker'\nimport { EVENTS } from 'Client/Constants/events'\nimport { BasicModal } from 'Client/Component/Generic/Modal/BasicModal'\nimport { NewLayerForm } from 'Client/Component/NewLayerForm/NewLayerForm'\nimport { LayerInput } from 'Client/Model/LayerInput'\nimport { LayerFactory } from 'Model/Factory/LayerFactory'\nimport { LayerRepository } from 'Client/Service/Repository/LayerRepository'\nimport { Layer } from 'Model/Layer'\nimport { CanvasLayer } from 'Client/Component/Canvas/CanvasLayer'\nimport { SheetRepository } from 'Client/Service/Repository/SheetRepository'\n\nCOMPONENTS.forEach((tagName, constructor) => {\n    customElements.define(tagName, constructor)\n})\n\nlet openSheets: string[] = []\n\nlet windowBoxes: { [key: string]: WindowBox } = {}\n\nconst layerRepository = new LayerRepository()\nconst sheetRepository = new SheetRepository()\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    Events.listenToFilesUploadSubmitted(files => {\n        FileUpload.uploadMultiple(files)\n    })\n\n    Events.listenToOpenSheet(async sheet => {\n        if (openSheets.includes(sheet.name)) {\n            windowBoxes[sheet.name].flash()\n            return\n        }\n        const component = Dom.makeComponent(SheetMaker, { imageSrc: sheet.imageSrc })\n\n        openSheets.push(sheet.name)\n\n        windowBoxes[sheet.name] = WindowBoxFactory.make(component, sheet.name)\n    })\n\n    Events.listenMouseDownOnWindowBox(windowBox => {\n        Dom.getAllOfComponent<WindowBox>(WindowBox).forEach(box => {\n            box.zIndexMoveDown()\n        })\n        windowBox.zIndexMoveUp()\n    })\n\n    Events.listenToSheetImportOpen(() => {\n        const component = Dom.makeComponent(SheetImporter)\n\n        WindowBoxFactory.make(component, 'Import Sheets')\n    })\n\n    Events.listen(() => {\n        const modal = Dom.makeComponent(BasicModal)\n        const newLayerForm = Dom.makeComponent(NewLayerForm)\n\n        modal.append(newLayerForm)\n\n        document.body.append(\n            modal\n        )\n    }, EVENTS.openAddNewLayer)\n\n    Events.listen((event) => {\n        const input: LayerInput = event.detail as LayerInput\n\n        const layer = Object.assign(\n            LayerFactory.make(),\n            input\n        )\n\n        Events.emit(EVENTS.newLayerMapped, [layer])\n\n        layerRepository.persist(layer)\n    }, EVENTS.newLayerSubmit)\n\n    Events.listen(\n        event => {\n            document.body.append(\n                ...(event.detail as Layer[]).map(layer => Dom.makeComponent(CanvasLayer, { layer }))\n            )\n        },\n        EVENTS.gotLayer,\n        EVENTS.newLayerMapped,\n    )\n\n    Events.listen(\n        event => {\n            layerRepository.update(event.detail as Layer)\n        },\n        EVENTS.layerPlacementMade,\n    )\n\n    Events.listen(\n        event => {\n            layerRepository.setActive((event.detail as Layer).uuid)\n        },\n        'layer-active',\n    )\n\n    layerRepository.getAll().then(layers => {\n        Events.emit(EVENTS.gotLayer, layers)\n    })\n\n    const getSheets = () => {\n        sheetRepository.getAll().then(sheets => {\n            console.log('got some sheets son')\n            Events.emit(EVENTS.gotSheets, sheets)\n        })\n    }\n\n    Events.listen(\n        event => {\n            getSheets()\n        },\n        EVENTS.getSheets\n    )\n\n\n    window.addEventListener('resize', () => Events.emit(EVENTS.windowResize))\n})\n\n"],"names":[],"sourceRoot":""}